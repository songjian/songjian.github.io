---
layout: post
title: 华为RH1288V3服务器
tags: [Huawei, RH1288V3, server, HomeLab]
categories: HomeLab
date: 2023-06-28 09:50:27 +0800
---

![](/assets/images/rh1288v3/photo_2023-06-29_09-48-48.jpg)

## Neofetch

![](/assets/img/neofetch-rh1288v3-ubuntu22.04.png)

## 硬件选择

最近有个业务需要一台服务器，不需要对外提供访问，对比了各家云服务器的价格后，还是觉得配一个电脑放在本地比较话算。

由于很多年没鼓捣装机了，包括机箱选择、散热方案、理线这些太牵涉精力了，我只想要一个可以稳定运行的电脑。最终还是决定买个二手机架服务器，毕竟都是企业级设备，稳定性和扩展性都有保证。

经过挑选服务器最终选了华为RH1288V3，选择的原因主要是便宜，相对戴尔、惠普和联想的同架构服务器便宜接近一半，网上能查到的资料很多，质量应该有保障。

CPU选了2颗E5 2666V3，这个CPU主频2.9GHz，10核20线程，2颗就是20核40线程，主要是比其他26xxV3的主频高一些，应对单线程要求比较高的场景表现会好一些。

服务器REG ECC内存白菜价，直接配了64GB。

考虑固态硬盘现在很便宜，在京东买了两块新的爱国者2T固态。



## 系统选择

服务器系统一般可选择裸机安装Server版操作系统，或者使用虚拟化系统，业务跑在虚拟机中，和云服务器使用方法类似。

### 裸机操作系统

虽然现在的虚拟化技术效率已经接近裸机运行效率，但是对于效率优先的场景，裸机操作系统可能更适合，比如计算领域。另一个优势是运维难度小，不需要有虚拟化相关技术的知识。

### 虚拟化操作系统：PVE和ESXi

实现虚拟化需要软件支持，主流的方案有开源的KVM（Linux内核虚拟机）和专有的VMWare的ESXi，PVE使用的也是KVM，所以归在KVM类别下。

#### KVM和ESXi的区别

使用的虚拟化技术不同，ESXi使用VMware家的产品，使用的是自家的虚拟化技术，软件栈也是VMware自家的，和Linux上常用的软件不一样。KVM是Linux内核虚拟机，整合在Linux里，完全开源，管理工具可以使用Linux上的常用软件。

ESXi的好处是可以买到商业服务，如果是大公司使用ESXi会很有优势。小公司不太可能去买ESXi的商业服务，只能靠公司里的运维人员自己解决。

VMware也有桌面系统的虚拟机软件，但是我不用，因为KVM已经足够好用了。

RH1288V3安装PVE系统错误的解决方法：
https://gist.github.com/sergey-cheperis/530666bc5d7064185ab72bfcaeb19ff1

## 网络环境的考虑

服务器会放在一个异地办公室，办公室同事只会简单的网络操作，比如：重启路由器和插拔网线。配置服务器网络的时候必须考虑这一点，所以我把网卡设为DHCP，并且写了一个systemd service，用于服务器开机后自动建立ssh隧道，方便我连上这台服务器。

